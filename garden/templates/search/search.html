{% extends "main.html" %}
{% load static %}

{% block my_title %}
Ø¬Ø³ØªØ¬Ùˆ
{% endblock my_title %}


{% block main %}
    <link rel="stylesheet" href="{% static "css/memory/index.css" %}">
    <link rel="stylesheet" href="{% static 'css/workshop/index.css' %}">
    <link rel="stylesheet" href="{% static "css/blog/index.css" %}">

    <style>
        .hr-style {
          border: none; 
          height: 4px; 
          background-color: black;
          margin: 20px 0; 
          border-radius: 5px; 
          box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); 
        }
    </style>
    {% if memories %}
        <div class="memories-container">
            {% for i in memories %}
                <div class="memory-card">
                    <img src="{{ media }}/{{ i.photo }}" alt="{{ i.title }}" class='img'>
                    <h1>
                        <span>Ø¹Ù†ÙˆØ§Ù† Ø®Ø§Ø·Ø±Ù‡ : </span>
                        <span>{{ i.title }}</span>
                    </h1>
                    <hr>
                    <p>
                        <span>Ù…ØªÙ† Ø®Ø§Ø·Ø±Ù‡ : </span>
                        <span>{{ i.text }}</span>
                    </p>
                    <hr>
                    <p class='other-photo-title'>
                        <i class="fas fa-arrow-down custom-icon"></i>
                        Ø¹Ú©Ø³ Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±
                        <i class="fas fa-arrow-down custom-icon"></i>
                    </p>
                    {% if i.memory_gallery.all %}
                        <div class="gallery">
                            {% for photo in i.memory_gallery.all %}
                                    <img src="{{ media }}/{{ photo.photo }}" alt="{{ i.title }}" class='other-photo'>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class='error-message'>Ù‡ÛŒÚ† Ø¹Ú©Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                    {% endif %}
                    <hr class="hr-for-photo">
                    <p>
                        <span>ØªØ§Ø±ÛŒØ® Ø®Ø§Ø·Ø±Ù‡ : </span>
                        <span>{{ i.memory_date }}</span>
                    </p>
                    <hr>
                    <p>
                        <span>Ø«Ø¨Øª Ø´Ø¯Ù‡ ØªÙˆØ³Ø· : </span>
                        <span>{{ i.user }}</span>
                    </p>
                    
                    <span class="heart" data-id="{{ i.id }}" onclick="toggleLike({{ i.id }})">
                        {% if i.id in list_memory_liked_id %}
                            â¤ï¸
                        {% else %}
                            ğŸ¤
                        {% endif %}
                    </span>                
                </div>
            {% endfor %}
        </div>
        <hr class="hr-style">
        {% endif %}
        {% if workshops %}
            <div class="workshops-container">
                {% for workshop in workshops %}
                <div class="workshops">
                    <div class="text-content">
                        <img src="{{ media }}/{{ workshop.photo }}" alt="workshop.title" class='img-50'>
                        <h1>
                            <span>Ø¹Ù†ÙˆØ§Ù† Ú©Ø§Ø±Ú¯Ø§Ù‡ : </span>
                            <span>{{ workshop.title }}</span>
                        </h1>
                        <hr>
                        <p>
                            <span>ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ : </span>
                            <span>{{ workshop.date }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>Ù…Ú©Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ : </span>
                            <span>{{ workshop.place }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>Ù…Ø¯Ø±Ø³ : </span>
                            <span>{{ workshop.teacher }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>Ø§Ø·Ù„Ø§Ø¹Ø§Øª : </span>
                            <span>{{ workshop.information }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>Ø´Ø±Ø§ÛŒØ· Ø«Ø¨Øª Ù†Ø§Ù… : </span>
                            <span>{{ workshop.registeration }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ú¯Ø§Ù‡ : </span>
                            <span class="{% if workshop.status.status_code == 3 %}status-true{% else %}status-false{% endif %}">{{ workshop.status }}</span>
                        </p>
                        <hr>
                        <p>
                            <span>ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ :</span>
                            <span class="{% if workshop.is_active %}status-true{% else %}status-false{% endif %}">
                                {% if workshop.is_active %}
                                    âœ”
                                {% else %}
                                    âœ–
                                {% endif %}
                            </span>
                        </p>
                        <a href="{% if workshop.status.status_code == 3 %}{% url "workshop:report_text" workshop.id %}{% else %}#{% endif %}" class="{% if workshop.status.status_code == 3 %}show-report{% else %}no-report{% endif %}" {% if workshop.status.status_code != 3 %}onmouseover="showTooltip(event)" onmouseout="hideTooltip()"{% endif %}>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø±Ú¯Ø§Ù‡</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        
            <div id="tooltip" class="tooltip">Ø§ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</div>
            <hr class="hr-style">
    {% endif %}

    
    {% if articles %}
        <div class="articles-container">
        {% for i in articles %}
            <div class="article-card">
                <img src="{{ media }}/{{ i.photo }}" alt="{{ i.title }}" class='img'>
                <h1>
                    <span>Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø§Ù„Ù‡ : </span>
                    <span>{{ i.title }}</span>
                </h1>
                <hr>
                <p>
                    <span>Ù…ØªÙ† Ø®Ù„Ø§ØµÙ‡ : </span>
                    <span>{{ i.short_text }}</span>
                </p>
                <hr>
                <p>
                    <span>Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ù‡Ø§ : </span>
                    {% for author in i.author.all %}
                        {{ author.name }} {{author.family}}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>
                <hr>
                <p>
                    <span>Ú¯Ø±ÙˆÙ‡ Ù…Ù‚Ø§Ù„Ù‡ : </span>
                    <span>{{ i.article_group }}</span>
                </p>
                <hr>
                <p>
                    <span>ØªØ§Ø±ÛŒØ® Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ : </span>
                    <span>{{ i.update_date }}</span>
                </p>
                <hr>
                <p>
                    <span>ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯ : </span>
                    <span>{{ i.visit }}</span>
                </p>
                <hr>
                <a href="{% url "blog:more" i.slug i.id %}" class='more-article'>Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ±</a>
            </div>
        {% endfor %}
    </div>
    {% endif %}
    <script>
      
        function toggleLike(id) {
            const heart = $('.heart[data-id="' + id + '"]');
            
            if (heart.html() === 'â¤ï¸') {
                // Ø§Ú¯Ø± Ù‚Ù„Ø¨ Ù„Ø§ÛŒÚ© Ø´Ø¯Ù‡ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø¢Ù†Ù„Ø§ÛŒÚ© Ú©Ù†ÛŒÙ…
                removeLike(id);
            } else {
                // Ø§Ú¯Ø± Ù‚Ù„Ø¨ Ù„Ø§ÛŒÚ© Ù†Ø´Ø¯Ù‡ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ù„Ø§ÛŒÚ© Ú©Ù†ÛŒÙ…
                like(id);
            }
        }

        function like(id) {
            $.ajax({
                type: 'GET',
                url: "{% url 'memory:like' %}",
                data: { memory: id },
                success: function() {
                    // ØªØºÛŒÛŒØ± Ø¹Ù„Ø§Ù…Øª Ù‚Ù„Ø¨ Ø¯Ø± ØµÙØ­Ù‡
                    $('.heart[data-id="' + id + '"]').html('â¤ï¸');
                }
            });
        }

        function removeLike(id) {
            $.ajax({
                type: 'GET',
                url: "{% url 'memory:removelike' %}",
                data: { memory: id },
                success: function() {
                    // ØªØºÛŒÛŒØ± Ø¹Ù„Ø§Ù…Øª Ù‚Ù„Ø¨ Ø¯Ø± ØµÙØ­Ù‡
                    $('.heart[data-id="' + id + '"]').html('ğŸ¤');
                }
            });
        }







        function showTooltip(event) {
            var tooltip = document.getElementById("tooltip");
            tooltip.style.display = "block";
            tooltip.style.left = event.pageX + 10 + "px";
            tooltip.style.top = event.pageY + 10 + "px";
        }
    
        function hideTooltip() {
            var tooltip = document.getElementById("tooltip");
            tooltip.style.display = "none";
        }
    
        document.addEventListener('mousemove', function(event) {
            var tooltip = document.getElementById("tooltip");
            if (tooltip.style.display === "block") {
                tooltip.style.left = event.pageX + 10 + "px";
                tooltip.style.top = event.pageY + 10 + "px";
            }
        });

    </script>
{% endblock main %}

